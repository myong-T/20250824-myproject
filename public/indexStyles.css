body {
      font-family: 'Noto Sans KR', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
      text-align: center;
    }

    .page {
      display: none;
      padding: 40px 20px;
    }

    .active {
      display: block;
    }

    .button {
      padding: 12px 25px;
      font-size: 1rem;
      margin: 10px;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background-color: #4CAF50;
      color: white;
    }

    .button:hover {
      background-color: #388E3C;
    }

    .button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    .difficulty-options {
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    #viewer {
      width: 335px;
      height: 335px;
      border: 1px solid #ccc;
      background-color: white;
      margin: 0 auto;
    }

    .canvas-box {
      padding: 10px;
      border: 1px solid #ccc;
      background: #fff;
      width: 370px;
      box-sizing: border-box;
    }

    canvas {
      border: 1px solid #999;
      background: white;
      cursor: crosshair;
    }

    canvas:hover {
      border-color: #666;
    }

    .tools {
      margin-top: 5px;
    }

    .tools button {
      margin: 4px;
      padding: 6px 12px;
      font-size: 0.9rem;
    }

    .feedback span {
      font-size: 1.8rem;
      margin: 0 12px;
    }

    .feedback-box {
      border: 1px solid #ccc;
      background-color: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      width: 320px;
      margin-top: 10px;
      font-size: 0.95rem;
      text-align: left;
    }

    .feedback-box ul {
      padding-left: 1.2rem;
      line-height: 1.5;
      margin-top: 8px;
    }

    .canvas-box h4 {
      font-size: 1.4rem;
      font-weight: bold;
      margin: 0 0 10px 0;
    }

    #mainPage h3, #mainPage h4 {
      font-size: 1.4rem;
      font-weight: bold;
    }

    .reference-box {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .reference-box h4 {
      color: #495057;
      font-size: 1.1rem;
      font-weight: bold;
      margin: 0 0 10px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .reference-box ul {
      color: #6c757d;
      font-size: 0.9rem;
      line-height: 1.6;
      margin: 0;
      padding-left: 20px;
      text-align: left;
    }

    .reference-box li {
      margin-bottom: 5px;
    }

    .icon {
      font-size: 1.2rem;
    }

    /* AI 피드백 관련 스타일 수정 (독립 칸으로 분리) */
    .ai-settings {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .api-key-input {
      flex: 1;
      min-width: 200px;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 0.9rem;
    }

    .ai-button {
      background-color: #6C63FF;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: background-color 0.3s;
    }

    .ai-button:hover:not(:disabled) {
      background-color: #5A52E5;
    }

    .ai-button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    .ai-feedback-area {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 15px 15px 15px 15px;
      margin: 0;
      min-height: 120px;
      text-align: left; /* 중앙 정렬에서 왼쪽 정렬로 변경 */
      font-size: 0.9rem;
      line-height: 1.5;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
      box-sizing: border-box;
    }

    .ai-feedback-area.loading {
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6c757d;
      font-style: italic;
    }

    .ai-feedback-area.error {
      background-color: #fff5f5;
      border-color: #fed7d7;
      color: #c53030;
    }

    .loading-spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid #6C63FF;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 8px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .ai-tips {
      background-color: #e7f3ff;
      border: 1px solid #b3d9ff;
      border-radius: 6px;
      padding: 10px;
      margin-top: 10px;
      font-size: 0.85rem;
      color: #0066cc;
      text-align: center;
    }

    .learning-stats {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 15px 20px;
      margin: 15px 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .stats-grid {
      display: grid;
      gap: 15px;
      margin-top: 10px;
    }

    .stat-card {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    /* 확장된 도면별 성과 분석 카드 (PDF 최적화) */
    .stat-card.expanded-card {
      padding: 16px;
      min-height: 110px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 6px;
    }

    .stat-card h4 {
      margin: 0 0 8px 0;
      color: #495057;
      font-size: 1rem;
    }

    .expanded-card h4 {
      font-size: 1rem;
      margin-bottom: 6px;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: #007bff;
      margin: 5px 0;
    }

    .expanded-card .stat-value {
      font-size: 1.6rem;
      margin: 6px 0;
    }

    .stat-card small {
      color: #6c757d;
      font-size: 0.8rem;
    }

    .expanded-card small {
      font-size: 0.8rem;
      margin-top: 2px;
    }

    .pattern-analysis {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      padding: 15px;
      margin-top: 15px;
      text-align: left;
    }

    .pattern-analysis h4 {
      margin: 0 0 10px 0;
      color: #495057;
    }

    .pattern-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .pattern-list li {
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
      font-size: 0.9rem;
    }

    .pattern-list li:last-child {
      border-bottom: none;
    }

    .back-button {
      background-color: #6c757d;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      margin: 20px 10px;
    }

    .back-button:hover {
      background-color: #5a6268;
    }

    /* AI 학습 분석 관련 추가 스타일 */
    .ai-pattern-analysis {
      transition: all 0.3s ease;
      overflow-wrap: break-word;
      word-wrap: break-word;
    }

    .ai-analysis-content {
      line-height: 1.6;
      color: #333;
    }

    .ai-analysis-content h2,
    .ai-analysis-content h3,
    .ai-analysis-content h4 {
      color: #495057;
      margin: 15px 0 8px 0;
      font-size: 1rem;
      font-weight: bold;
    }

    .ai-analysis-content ul,
    .ai-analysis-content ol {
      margin: 8px 0;
      padding-left: 20px;
    }

    .ai-analysis-content li {
      margin: 4px 0;
    }

    .loading-content {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .ai-error-content {
      text-align: center;
      padding: 20px;
    }

    .ai-error-content button {
      margin-top: 15px;
      padding: 8px 16px;
      background-color: #6C63FF;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .ai-error-content button:hover {
      background-color: #5A52E5;
    }

    .fallback-analysis h5 {
      color: #495057;
      font-size: 0.95rem;
      font-weight: bold;
      margin: 15px 0 8px 0;
    }

    .fallback-analysis ul {
      margin: 10px 0;
      padding-left: 20px;
      list-style-type: disc;
    }

    .fallback-analysis li {
      margin: 5px 0;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    /* 도면 이미지 미리보기 스타일 (크기 증가) */
    .drawing-preview {
      width: 80px !important;
      height: 80px !important;
      border: 1px solid #ddd !important;
      border-radius: 4px !important;
      margin: 6px auto 0 auto !important;
      background-color: white !important;
      display: block !important;
    }

    .expanded-card .drawing-preview {
      width: 85px !important;
      height: 85px !important;
      margin: 6px auto 6px auto !important;
    }

    /* 반응형 지원 */
    @media (max-width: 768px) {
      .stats-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 10px;
      }
      
      .expanded-card {
        min-height: 100px;
        padding: 12px;
      }
      
      .ai-pattern-analysis {
        padding: 15px;
        font-size: 0.85rem;
      }
      
      .loading-content {
        min-height: 100px;
      }
      
      .ai-analysis-content h2,
      .ai-analysis-content h3,
      .ai-analysis-content h4 {
        font-size: 0.9rem;
      }
    }

    @media (max-width: 480px) {
      .stats-grid {
        grid-template-columns: 1fr !important;
      }
    }